version: '3.8'

services:
  # 1. POSTGRESQL DATABASE SERVICE
  postgres_db:
    image: postgres:15-alpine # S·ª≠ d·ª•ng image Postgres nh·∫π
    container_name: hrm_postgres_db
    environment:
      # üí° T√™n Database m√† Auth Service s·∫Ω k·∫øt n·ªëi ƒë·∫øn
      POSTGRES_DB: hrm_db
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
    ports:
      # √Ånh x·∫° c·ªïng n·ªôi b·ªô 5432 c·ªßa container ra c·ªïng 5432 tr√™n m√°y host
      - "5432:5432"
    volumes:
      # Gi√∫p d·ªØ li·ªáu kh√¥ng b·ªã m·∫•t khi container b·ªã d·ª´ng
      - postgres_data:/var/lib/postgresql/data
    restart: always

  # 2. EUREKA SERVER SERVICE (V√≠ d·ª•, n·∫øu b·∫°n ƒë√£ c√≥ Dockerfile)
  eureka-server:
    build:
      context: ./eureka-server
      dockerfile: Dockerfile
    container_name: hrm_eureka_server
    ports:
      - "8761:8791"
    restart: always

volumes:
  postgres_data:
    # M·∫∑c ƒë·ªãnh, Docker s·∫Ω t·∫°o m·ªôt named volume ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu
